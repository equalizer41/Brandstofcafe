@page "/"
@inject ProductRepository ProductRepo
@inject TafelRepository TafelRepo
@using projectweb.Repositories

<h1>Neem een nieuwe bestelling op!</h1>

<p>Selecteer een tafel om een bestelling op te nemen:</p>

<div class="container my-4">
    <div class="row">
        <div class="col-md-6 mb-3">
            <label for="tafelSelectie" class="form-label">Kies een tafel:</label>
            <select class="form-select" id="tafelSelectie" @bind="selectedTafel">
                <option disabled selected value="">-- Selecteer een tafel --</option>
                @foreach (var tafel in tafels)
                {
                    <option value="@tafel.Id">@tafel.Naam</option>
                }
            </select>
        </div>

        <div class="col-12 text-end">
            <button class="btn btn-primary" @onclick="StartBestelling" disabled="@(!KanStarten)">
                Start bestelling
            </button>
        </div>
    </div>
</div>

<h3>Productlijst</h3>
<ul>
    @foreach (var product in producten)
    {
        <li>@product.Naam - €@product.Prijs</li>
    }
</ul>

@code {
    private List<Product> producten = new();
    private List<Tafel> tafels = new();
    private int? selectedTafel;

    protected override void OnInitialized()
    {
        producten = ProductRepo.GetAll();
        tafels = TafelRepo.GetAll();
    }

    private bool KanStarten => selectedTafel.HasValue;

    private void StartBestelling()
    {
        Console.WriteLine($"Bestelling gestart voor tafel ID: {selectedTafel}");
    }
}
